<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Qiscus Chat Widget</title>
  <link rel="stylesheet" href="styles.css">
  <script src="https://unpkg.com/qiscus-sdk-core"></script>
  <!-- Google Fonts for premium look -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>

<body>

  <!-- Floating Action Button -->
  <button class="fab" id="fab-chat" aria-label="Open chat">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
    </svg>
  </button>

  <!-- Chat Widget Container -->
  <div class="chat-widget hidden" id="chat-widget">
    <header class="widget-header">
      <button class="icon-btn hidden" id="btn-back" title="Back">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
          stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <polyline points="15 18 9 12 15 6"></polyline>
        </svg>
      </button>
      <div class="header-info">
        <h3 id="widget-title">Qiscus Chat</h3>
        <small id="widget-subtitle" class="subtitle hidden"></small>
      </div>
      <button class="icon-btn" id="btn-close" title="Close">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
          stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <line x1="18" y1="6" x2="6" y2="18"></line>
          <line x1="6" y1="6" x2="18" y2="18"></line>
        </svg>
      </button>
    </header>

    <div class="widget-body">
      <!-- VIEW: Login -->
      <section id="view-login" class="view-section">
        <div class="login-intro">
          <h2>Welcome</h2>
          <p>Please sign in to start chatting.</p>
        </div>
        <form id="auth-form" class="stack">
          <label>
            <span>User ID</span>
            <input type="text" name="userId" placeholder="user-1" required>
          </label>
          <label>
            <span>Password / Key</span>
            <input type="password" name="userKey" placeholder="secret" required>
          </label>
          <label>
            <span>Display Name</span>
            <input type="text" name="username" placeholder="User One">
          </label>
          <button type="submit" class="primary full-width">Start Chatting</button>
        </form>
      </section>

      <!-- VIEW: Room List -->
      <section id="view-room-list" class="view-section hidden">
        <div class="list-controls">
          <p class="section-title">Your Conversations</p>
          <div class="controls-group">
            <button id="btn-logout" class="icon-btn-small" title="Logout" style="margin-right: 8px;">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                <polyline points="16 17 21 12 16 7"></polyline>
                <line x1="21" y1="12" x2="9" y2="12"></line>
              </svg>
            </button>
            <button id="rooms-refresh" class="icon-btn-small" title="Refresh">↻</button>
          </div>
        </div>
        <div id="room-list" class="room-list">
          <!-- Room items injected here -->
        </div>
        <!-- Simple pagination if needed -->
        <div class="pagination-controls styled-pagination">
          <button id="rooms-prev" disabled>←</button>
          <span id="rooms-page">Page 1</span>
          <button id="rooms-next">→</button>
        </div>
      </section>

      <!-- VIEW: Chat -->
      <section id="view-chat" class="view-section hidden">
        <div id="message-list" class="message-list">
          <!-- Messages injected here -->
          <div class="placeholder">Select a room to start chatting</div>
        </div>

        <div class="typing-indicator hidden" id="typing-bar"></div>

        <form id="message-form" class="chat-footer">
          <div class="input-wrapper">
            <input type="text" name="message" placeholder="Type a message..." autocomplete="off">
            <button type="button" class="icon-btn" id="btn-upload" title="Upload File">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path
                  d="M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48">
                </path>
              </svg>
            </button>
          </div>
          <button type="submit" class="send-btn">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
              stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <line x1="22" y1="2" x2="11" y2="13"></line>
              <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
            </svg>
          </button>
        </form>

        <!-- Hidden file input triggered by btn-upload -->
        <form id="file-form" class="hidden">
          <input type="file" name="file" id="file-input">
        </form>
      </section>
    </div>
  </div>

  <script src="app.js"></script>
</body>

</html>